{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aless\\\\Desktop\\\\Da_zero\\\\fastApiProject\\\\frontend\\\\src\\\\pages\\\\RecommendationsPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport api from '../services/api';\nimport { theme } from '../styles/theme';\nimport ClusteringChart from '../components/ClusteringChart';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PageContainer = styled.div`\n  min-height: 100vh;\n  background: linear-gradient(135deg, ${theme.colors.primary} 0%, ${theme.colors.primaryDark} 100%);\n  padding: ${theme.spacing.xl};\n`;\n_c = PageContainer;\nconst Header = styled.div`\n  text-align: center;\n  margin-bottom: ${theme.spacing.xl};\n  color: white;\n`;\n_c2 = Header;\nconst Title = styled.h1`\n  font-size: ${theme.fontSize['3xl']};\n  margin-bottom: ${theme.spacing.md};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: ${theme.spacing.md};\n`;\n_c3 = Title;\nconst Subtitle = styled.p`\n  font-size: ${theme.fontSize.lg};\n  opacity: 0.9;\n`;\n_c4 = Subtitle;\nconst SectionContainer = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: ${theme.spacing.xl};\n  max-width: 1400px;\n  margin: 0 auto;\n  \n  @media (max-width: 1024px) {\n    grid-template-columns: 1fr;\n  }\n`;\n_c5 = SectionContainer;\nconst Section = styled.div`\n  background: white;\n  border-radius: ${theme.borderRadius.lg};\n  padding: ${theme.spacing.xl};\n  box-shadow: ${theme.boxShadow.lg};\n  margin-bottom: ${theme.spacing.lg};\n`;\n_c6 = Section;\nconst SectionHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.md};\n  margin-bottom: ${theme.spacing.lg};\n  border-bottom: 2px solid ${theme.colors.primaryLighter};\n  padding-bottom: ${theme.spacing.md};\n`;\n_c7 = SectionHeader;\nconst SectionTitle = styled.h2`\n  color: ${theme.colors.primary};\n  font-size: ${theme.fontSize.xl};\n  margin: 0;\n`;\n_c8 = SectionTitle;\nconst Button = styled.button`\n  background: ${theme.colors.secondary};\n  color: white;\n  border: none;\n  padding: ${theme.spacing.md} ${theme.spacing.lg};\n  border-radius: ${theme.borderRadius.md};\n  font-size: ${theme.fontSize.base};\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.sm};\n  transition: all 0.3s ease;\n  \n  &:hover {\n    background: ${theme.colors.secondaryDark};\n    transform: translateY(-2px);\n  }\n  \n  &:disabled {\n    background: #ccc;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n_c9 = Button;\nconst StatusBadge = styled.span`\n  padding: ${theme.spacing.xs} ${theme.spacing.sm};\n  background: ${props => props.isReady ? theme.colors.secondaryLighter : '#fef3c7'};\n  color: ${props => props.isReady ? theme.colors.secondary : '#92400e'};\n  border-radius: ${theme.borderRadius.sm};\n  font-size: ${theme.fontSize.sm};\n  font-weight: bold;\n`;\n_c0 = StatusBadge;\nconst MovieCard = styled.div`\n  display: flex;\n  gap: ${theme.spacing.md};\n  padding: ${theme.spacing.md};\n  border: 1px solid ${theme.colors.primaryLighter};\n  border-radius: ${theme.borderRadius.md};\n  margin-bottom: ${theme.spacing.md};\n  transition: transform 0.2s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: ${theme.boxShadow.base};\n  }\n`;\n_c1 = MovieCard;\nconst MoviePoster = styled.img`\n  width: 80px;\n  height: 120px;\n  object-fit: cover;\n  border-radius: ${theme.borderRadius.sm};\n  background: ${theme.colors.primaryLighter};\n`;\n_c10 = MoviePoster;\nconst MovieInfo = styled.div`\n  flex: 1;\n`;\n_c11 = MovieInfo;\nconst MovieTitle = styled.h4`\n  color: ${theme.colors.primary};\n  margin: 0 0 ${theme.spacing.xs} 0;\n  font-size: ${theme.fontSize.base};\n`;\n_c12 = MovieTitle;\nconst MovieRating = styled.div`\n  display: flex;\n  align-items: center;\n  gap: ${theme.spacing.xs};\n  color: ${theme.colors.secondary};\n  font-weight: bold;\n  margin-bottom: ${theme.spacing.xs};\n`;\n_c13 = MovieRating;\nconst MovieGenres = styled.div`\n  font-size: ${theme.fontSize.sm};\n  color: #666;\n`;\n_c14 = MovieGenres;\nconst MetricCard = styled.div`\n  background: ${theme.colors.primaryLighter};\n  padding: ${theme.spacing.lg};\n  border-radius: ${theme.borderRadius.md};\n  text-align: center;\n  margin-bottom: ${theme.spacing.md};\n`;\n_c15 = MetricCard;\nconst MetricValue = styled.div`\n  font-size: ${theme.fontSize['2xl']};\n  font-weight: bold;\n  color: ${theme.colors.primary};\n  margin-bottom: ${theme.spacing.xs};\n`;\n_c16 = MetricValue;\nconst MetricLabel = styled.div`\n  font-size: ${theme.fontSize.sm};\n  color: #666;\n`;\n_c17 = MetricLabel;\nconst LoadingSpinner = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: ${theme.spacing.xl};\n  color: ${theme.colors.primary};\n`;\n_c18 = LoadingSpinner;\nconst ErrorMessage = styled.div`\n  background: #fee2e2;\n  color: #dc2626;\n  padding: ${theme.spacing.md};\n  border-radius: ${theme.borderRadius.md};\n  text-align: center;\n  margin: ${theme.spacing.md} 0;\n`;\n_c19 = ErrorMessage;\nconst ClusterChart = styled.div`\n  background: #f8fafc;\n  border-radius: ${theme.borderRadius.md};\n  padding: ${theme.spacing.lg};\n  text-align: center;\n  height: 300px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #666;\n`;\n_c20 = ClusterChart;\nconst RecommendationsPage = ({\n  user\n}) => {\n  _s();\n  var _evaluation$rmse, _evaluation$mae, _clustering$points, _clustering$points2, _clustering$points3, _clustering$points4;\n  const [modelStatus, setModelStatus] = useState(null);\n  const [recommendations, setRecommendations] = useState([]);\n  const [userHistory, setUserHistory] = useState([]);\n  const [evaluation, setEvaluation] = useState(null);\n  const [clustering, setClustering] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const getTMDBImageUrl = posterPath => {\n    if (!posterPath) {\n      const placeholderSVG = `data:image/svg+xml,${encodeURIComponent(`\n        <svg width=\"80\" height=\"120\" xmlns=\"http://www.w3.org/2000/svg\">\n          <rect width=\"100%\" height=\"100%\" fill=\"#2a5298\"/>\n          <text x=\"50%\" y=\"50%\" text-anchor=\"middle\" fill=\"white\" font-size=\"12\" font-family=\"Arial\">\n            No Image\n          </text>\n        </svg>\n      `)}`;\n      return placeholderSVG;\n    }\n    return posterPath.startsWith('http') ? posterPath : `https://image.tmdb.org/t/p/w200${posterPath}`;\n  };\n  useEffect(() => {\n    fetchModelStatus();\n  }, []);\n  const fetchModelStatus = async () => {\n    try {\n      const response = await api.get('/recommendations/status');\n      setModelStatus(response.data);\n    } catch (error) {\n      console.error('Error fetching model status:', error);\n      setError('Errore nel recupero dello stato del modello');\n    }\n  };\n  const trainModel = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      await api.get('/recommendations/train-sync');\n      setError('');\n      fetchModelStatus();\n      alert('Modello addestrato con successo!');\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Error training model:', error);\n      setError('Errore nel training del modello: ' + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.detail) || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchRecommendations = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await api.get(`/recommendations/user/${user.id}?top_n=10`);\n      setRecommendations(response.data);\n      setError('');\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('Error fetching recommendations:', error);\n      setError('Errore nel recupero delle raccomandazioni: ' + (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.detail) || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchUserHistory = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await api.get(`/recommendations/user/${user.id}/history`);\n      setUserHistory(response.data);\n      setError('');\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      console.error('Error fetching user history:', error);\n      setError('Errore nel recupero dello storico: ' + (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.detail) || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchEvaluation = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await api.get('/recommendations/evaluation');\n      setEvaluation(response.data);\n      setError('');\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      console.error('Error fetching evaluation:', error);\n      setError('Errore nel recupero della valutazione: ' + (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.detail) || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchClustering = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await api.get('/recommendations/clustering');\n      setClustering(response.data);\n      setError('');\n    } catch (error) {\n      var _error$response5, _error$response5$data;\n      console.error('Error fetching clustering:', error);\n      setError('Errore nel recupero del clustering: ' + (((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.detail) || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(PageContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: [/*#__PURE__*/_jsxDEV(FaBrain, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), \"Sistema di Raccomandazioni ML\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Subtitle, {\n        children: \"Raccomandazioni personalizzate basate su Machine Learning con algoritmo SVD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(SectionContainer, {\n      children: [/*#__PURE__*/_jsxDEV(Section, {\n        children: [/*#__PURE__*/_jsxDEV(SectionHeader, {\n          children: [/*#__PURE__*/_jsxDEV(FaCog, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SectionTitle, {\n            children: \"Stato Modello\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this), modelStatus && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(MetricCard, {\n            children: [/*#__PURE__*/_jsxDEV(MetricValue, {\n              children: /*#__PURE__*/_jsxDEV(StatusBadge, {\n                isReady: modelStatus.is_trained,\n                children: modelStatus.is_trained ? 'ADDESTRATO' : 'NON ADDESTRATO'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MetricLabel, {\n              children: \"Stato del Modello\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this), modelStatus.is_trained && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(MetricCard, {\n              children: [/*#__PURE__*/_jsxDEV(MetricValue, {\n                children: [(modelStatus.explained_variance * 100).toFixed(2), \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(MetricLabel, {\n                children: \"Varianza Spiegata\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(MetricCard, {\n              children: [/*#__PURE__*/_jsxDEV(MetricValue, {\n                children: modelStatus.n_components\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(MetricLabel, {\n                children: \"Componenti SVD\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: trainModel,\n            disabled: loading,\n            children: [/*#__PURE__*/_jsxDEV(FaCog, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 17\n            }, this), loading ? 'Training in corso...' : 'Ri-addestra Modello']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Section, {\n        children: [/*#__PURE__*/_jsxDEV(SectionHeader, {\n          children: [/*#__PURE__*/_jsxDEV(FaStar, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SectionTitle, {\n            children: \"Le Tue Raccomandazioni\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: fetchRecommendations,\n          disabled: loading || !(modelStatus !== null && modelStatus !== void 0 && modelStatus.is_trained),\n          children: [/*#__PURE__*/_jsxDEV(FaPlay, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this), \"Genera Raccomandazioni\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this), recommendations.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '20px'\n          },\n          children: recommendations.slice(0, 5).map((movie, index) => /*#__PURE__*/_jsxDEV(MovieCard, {\n            children: [/*#__PURE__*/_jsxDEV(MoviePoster, {\n              src: getTMDBImageUrl(movie.poster_url),\n              alt: movie.title,\n              onError: e => {\n                e.target.src = getTMDBImageUrl(null);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(MovieInfo, {\n              children: [/*#__PURE__*/_jsxDEV(MovieTitle, {\n                children: movie.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(MovieRating, {\n                children: [/*#__PURE__*/_jsxDEV(FaStar, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 23\n                }, this), movie.predicted_rating.toFixed(2), \" (previsto)\", movie.tmdb_rating && ` • TMDB: ${movie.tmdb_rating}`]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(MovieGenres, {\n                children: [movie.genres.join(', '), \" \\u2022 Cluster: \", movie.cluster]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Section, {\n        children: [/*#__PURE__*/_jsxDEV(SectionHeader, {\n          children: [/*#__PURE__*/_jsxDEV(FaChartLine, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SectionTitle, {\n            children: \"Il Tuo Storico\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: fetchUserHistory,\n          disabled: loading,\n          children: [/*#__PURE__*/_jsxDEV(FaChartLine, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 13\n          }, this), \"Visualizza Storico Voti\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 11\n        }, this), userHistory.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(MetricCard, {\n            children: [/*#__PURE__*/_jsxDEV(MetricValue, {\n              children: userHistory.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MetricLabel, {\n              children: \"Film Votati\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 15\n          }, this), userHistory.slice(0, 5).map((movie, index) => /*#__PURE__*/_jsxDEV(MovieCard, {\n            children: [/*#__PURE__*/_jsxDEV(MoviePoster, {\n              src: getTMDBImageUrl(movie.poster_url),\n              alt: movie.title,\n              onError: e => {\n                e.target.src = getTMDBImageUrl(null);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(MovieInfo, {\n              children: [/*#__PURE__*/_jsxDEV(MovieTitle, {\n                children: movie.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(MovieRating, {\n                children: [/*#__PURE__*/_jsxDEV(FaStar, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 23\n                }, this), movie.rating, \"/5 (il tuo voto)\", movie.tmdb_rating && ` • TMDB: ${movie.tmdb_rating}`]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 437,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(MovieGenres, {\n                children: movie.genres.join(', ')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 442,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Section, {\n        children: [/*#__PURE__*/_jsxDEV(SectionHeader, {\n          children: [/*#__PURE__*/_jsxDEV(FaChartLine, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SectionTitle, {\n            children: \"Metriche del Modello\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: fetchEvaluation,\n          disabled: loading || !(modelStatus !== null && modelStatus !== void 0 && modelStatus.is_trained),\n          children: [/*#__PURE__*/_jsxDEV(FaChartLine, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 13\n          }, this), \"Valuta Performance\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 11\n        }, this), evaluation && !evaluation.error && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(MetricCard, {\n            children: [/*#__PURE__*/_jsxDEV(MetricValue, {\n              children: ((_evaluation$rmse = evaluation.rmse) === null || _evaluation$rmse === void 0 ? void 0 : _evaluation$rmse.toFixed(4)) || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MetricLabel, {\n              children: \"RMSE (Root Mean Square Error)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(MetricCard, {\n            children: [/*#__PURE__*/_jsxDEV(MetricValue, {\n              children: ((_evaluation$mae = evaluation.mae) === null || _evaluation$mae === void 0 ? void 0 : _evaluation$mae.toFixed(4)) || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MetricLabel, {\n              children: \"MAE (Mean Absolute Error)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(MetricCard, {\n            children: [/*#__PURE__*/_jsxDEV(MetricValue, {\n              children: evaluation.test_samples || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MetricLabel, {\n              children: \"Campioni di Test\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 13\n        }, this), (evaluation === null || evaluation === void 0 ? void 0 : evaluation.error) && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          style: {\n            marginTop: '20px'\n          },\n          children: evaluation.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Section, {\n        children: [/*#__PURE__*/_jsxDEV(SectionHeader, {\n          children: [/*#__PURE__*/_jsxDEV(FaBrain, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SectionTitle, {\n            children: \"Clustering dei Film\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: fetchClustering,\n          disabled: loading || !(modelStatus !== null && modelStatus !== void 0 && modelStatus.is_trained),\n          children: [/*#__PURE__*/_jsxDEV(FaBrain, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 13\n          }, this), \"Visualizza Clustering\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 11\n        }, this), clustering && !clustering.error && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(MetricCard, {\n            children: [/*#__PURE__*/_jsxDEV(MetricValue, {\n              children: clustering.n_clusters\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MetricLabel, {\n              children: \"Cluster Identificati\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(MetricCard, {\n            children: [/*#__PURE__*/_jsxDEV(MetricValue, {\n              children: ((_clustering$points = clustering.points) === null || _clustering$points === void 0 ? void 0 : _clustering$points.length) || 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MetricLabel, {\n              children: \"Film nel Dataset\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ClusterChart, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\uD83D\\uDCCA Visualizzazione Clustering\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Cluster 0: \", ((_clustering$points2 = clustering.points) === null || _clustering$points2 === void 0 ? void 0 : _clustering$points2.filter(p => p.cluster === 0).length) || 0, \" film\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Cluster 1: \", ((_clustering$points3 = clustering.points) === null || _clustering$points3 === void 0 ? void 0 : _clustering$points3.filter(p => p.cluster === 1).length) || 0, \" film\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Cluster 2: \", ((_clustering$points4 = clustering.points) === null || _clustering$points4 === void 0 ? void 0 : _clustering$points4.filter(p => p.cluster === 2).length) || 0, \" film\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 13\n        }, this), (clustering === null || clustering === void 0 ? void 0 : clustering.error) && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          style: {\n            marginTop: '20px'\n          },\n          children: clustering.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Caricamento in corso...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 313,\n    columnNumber: 5\n  }, this);\n};\n_s(RecommendationsPage, \"p8EfegbOXBLUoo0A+HtnBCH5uMw=\");\n_c21 = RecommendationsPage;\nexport default RecommendationsPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21;\n$RefreshReg$(_c, \"PageContainer\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"Title\");\n$RefreshReg$(_c4, \"Subtitle\");\n$RefreshReg$(_c5, \"SectionContainer\");\n$RefreshReg$(_c6, \"Section\");\n$RefreshReg$(_c7, \"SectionHeader\");\n$RefreshReg$(_c8, \"SectionTitle\");\n$RefreshReg$(_c9, \"Button\");\n$RefreshReg$(_c0, \"StatusBadge\");\n$RefreshReg$(_c1, \"MovieCard\");\n$RefreshReg$(_c10, \"MoviePoster\");\n$RefreshReg$(_c11, \"MovieInfo\");\n$RefreshReg$(_c12, \"MovieTitle\");\n$RefreshReg$(_c13, \"MovieRating\");\n$RefreshReg$(_c14, \"MovieGenres\");\n$RefreshReg$(_c15, \"MetricCard\");\n$RefreshReg$(_c16, \"MetricValue\");\n$RefreshReg$(_c17, \"MetricLabel\");\n$RefreshReg$(_c18, \"LoadingSpinner\");\n$RefreshReg$(_c19, \"ErrorMessage\");\n$RefreshReg$(_c20, \"ClusterChart\");\n$RefreshReg$(_c21, \"RecommendationsPage\");","map":{"version":3,"names":["React","useState","useEffect","styled","api","theme","ClusteringChart","jsxDEV","_jsxDEV","Fragment","_Fragment","PageContainer","div","colors","primary","primaryDark","spacing","xl","_c","Header","_c2","Title","h1","fontSize","md","_c3","Subtitle","p","lg","_c4","SectionContainer","_c5","Section","borderRadius","boxShadow","_c6","SectionHeader","primaryLighter","_c7","SectionTitle","h2","_c8","Button","button","secondary","base","sm","secondaryDark","_c9","StatusBadge","span","xs","props","isReady","secondaryLighter","_c0","MovieCard","_c1","MoviePoster","img","_c10","MovieInfo","_c11","MovieTitle","h4","_c12","MovieRating","_c13","MovieGenres","_c14","MetricCard","_c15","MetricValue","_c16","MetricLabel","_c17","LoadingSpinner","_c18","ErrorMessage","_c19","ClusterChart","_c20","RecommendationsPage","user","_s","_evaluation$rmse","_evaluation$mae","_clustering$points","_clustering$points2","_clustering$points3","_clustering$points4","modelStatus","setModelStatus","recommendations","setRecommendations","userHistory","setUserHistory","evaluation","setEvaluation","clustering","setClustering","loading","setLoading","error","setError","getTMDBImageUrl","posterPath","placeholderSVG","encodeURIComponent","startsWith","fetchModelStatus","response","get","data","console","trainModel","alert","_error$response","_error$response$data","detail","message","fetchRecommendations","id","_error$response2","_error$response2$data","fetchUserHistory","_error$response3","_error$response3$data","fetchEvaluation","_error$response4","_error$response4$data","fetchClustering","_error$response5","_error$response5$data","children","FaBrain","fileName","_jsxFileName","lineNumber","columnNumber","FaCog","is_trained","explained_variance","toFixed","n_components","onClick","disabled","FaStar","FaPlay","length","style","marginTop","slice","map","movie","index","src","poster_url","alt","title","onError","e","target","predicted_rating","tmdb_rating","genres","join","cluster","FaChartLine","rating","rmse","mae","test_samples","n_clusters","points","filter","_c21","$RefreshReg$"],"sources":["C:/Users/aless/Desktop/Da_zero/fastApiProject/frontend/src/pages/RecommendationsPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport api from '../services/api';\r\nimport { theme } from '../styles/theme';\r\nimport ClusteringChart from '../components/ClusteringChart';\r\n\r\nconst PageContainer = styled.div`\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, ${theme.colors.primary} 0%, ${theme.colors.primaryDark} 100%);\r\n  padding: ${theme.spacing.xl};\r\n`;\r\n\r\nconst Header = styled.div`\r\n  text-align: center;\r\n  margin-bottom: ${theme.spacing.xl};\r\n  color: white;\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  font-size: ${theme.fontSize['3xl']};\r\n  margin-bottom: ${theme.spacing.md};\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: ${theme.spacing.md};\r\n`;\r\n\r\nconst Subtitle = styled.p`\r\n  font-size: ${theme.fontSize.lg};\r\n  opacity: 0.9;\r\n`;\r\n\r\nconst SectionContainer = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: ${theme.spacing.xl};\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n  \r\n  @media (max-width: 1024px) {\r\n    grid-template-columns: 1fr;\r\n  }\r\n`;\r\n\r\nconst Section = styled.div`\r\n  background: white;\r\n  border-radius: ${theme.borderRadius.lg};\r\n  padding: ${theme.spacing.xl};\r\n  box-shadow: ${theme.boxShadow.lg};\r\n  margin-bottom: ${theme.spacing.lg};\r\n`;\r\n\r\nconst SectionHeader = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: ${theme.spacing.md};\r\n  margin-bottom: ${theme.spacing.lg};\r\n  border-bottom: 2px solid ${theme.colors.primaryLighter};\r\n  padding-bottom: ${theme.spacing.md};\r\n`;\r\n\r\nconst SectionTitle = styled.h2`\r\n  color: ${theme.colors.primary};\r\n  font-size: ${theme.fontSize.xl};\r\n  margin: 0;\r\n`;\r\n\r\nconst Button = styled.button`\r\n  background: ${theme.colors.secondary};\r\n  color: white;\r\n  border: none;\r\n  padding: ${theme.spacing.md} ${theme.spacing.lg};\r\n  border-radius: ${theme.borderRadius.md};\r\n  font-size: ${theme.fontSize.base};\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: ${theme.spacing.sm};\r\n  transition: all 0.3s ease;\r\n  \r\n  &:hover {\r\n    background: ${theme.colors.secondaryDark};\r\n    transform: translateY(-2px);\r\n  }\r\n  \r\n  &:disabled {\r\n    background: #ccc;\r\n    cursor: not-allowed;\r\n    transform: none;\r\n  }\r\n`;\r\n\r\nconst StatusBadge = styled.span`\r\n  padding: ${theme.spacing.xs} ${theme.spacing.sm};\r\n  background: ${props => props.isReady ? theme.colors.secondaryLighter : '#fef3c7'};\r\n  color: ${props => props.isReady ? theme.colors.secondary : '#92400e'};\r\n  border-radius: ${theme.borderRadius.sm};\r\n  font-size: ${theme.fontSize.sm};\r\n  font-weight: bold;\r\n`;\r\n\r\nconst MovieCard = styled.div`\r\n  display: flex;\r\n  gap: ${theme.spacing.md};\r\n  padding: ${theme.spacing.md};\r\n  border: 1px solid ${theme.colors.primaryLighter};\r\n  border-radius: ${theme.borderRadius.md};\r\n  margin-bottom: ${theme.spacing.md};\r\n  transition: transform 0.2s ease;\r\n  \r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: ${theme.boxShadow.base};\r\n  }\r\n`;\r\n\r\nconst MoviePoster = styled.img`\r\n  width: 80px;\r\n  height: 120px;\r\n  object-fit: cover;\r\n  border-radius: ${theme.borderRadius.sm};\r\n  background: ${theme.colors.primaryLighter};\r\n`;\r\n\r\nconst MovieInfo = styled.div`\r\n  flex: 1;\r\n`;\r\n\r\nconst MovieTitle = styled.h4`\r\n  color: ${theme.colors.primary};\r\n  margin: 0 0 ${theme.spacing.xs} 0;\r\n  font-size: ${theme.fontSize.base};\r\n`;\r\n\r\nconst MovieRating = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: ${theme.spacing.xs};\r\n  color: ${theme.colors.secondary};\r\n  font-weight: bold;\r\n  margin-bottom: ${theme.spacing.xs};\r\n`;\r\n\r\nconst MovieGenres = styled.div`\r\n  font-size: ${theme.fontSize.sm};\r\n  color: #666;\r\n`;\r\n\r\nconst MetricCard = styled.div`\r\n  background: ${theme.colors.primaryLighter};\r\n  padding: ${theme.spacing.lg};\r\n  border-radius: ${theme.borderRadius.md};\r\n  text-align: center;\r\n  margin-bottom: ${theme.spacing.md};\r\n`;\r\n\r\nconst MetricValue = styled.div`\r\n  font-size: ${theme.fontSize['2xl']};\r\n  font-weight: bold;\r\n  color: ${theme.colors.primary};\r\n  margin-bottom: ${theme.spacing.xs};\r\n`;\r\n\r\nconst MetricLabel = styled.div`\r\n  font-size: ${theme.fontSize.sm};\r\n  color: #666;\r\n`;\r\n\r\nconst LoadingSpinner = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: ${theme.spacing.xl};\r\n  color: ${theme.colors.primary};\r\n`;\r\n\r\nconst ErrorMessage = styled.div`\r\n  background: #fee2e2;\r\n  color: #dc2626;\r\n  padding: ${theme.spacing.md};\r\n  border-radius: ${theme.borderRadius.md};\r\n  text-align: center;\r\n  margin: ${theme.spacing.md} 0;\r\n`;\r\n\r\nconst ClusterChart = styled.div`\r\n  background: #f8fafc;\r\n  border-radius: ${theme.borderRadius.md};\r\n  padding: ${theme.spacing.lg};\r\n  text-align: center;\r\n  height: 300px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #666;\r\n`;\r\n\r\nconst RecommendationsPage = ({ user }) => {\r\n  const [modelStatus, setModelStatus] = useState(null);\r\n  const [recommendations, setRecommendations] = useState([]);\r\n  const [userHistory, setUserHistory] = useState([]);\r\n  const [evaluation, setEvaluation] = useState(null);\r\n  const [clustering, setClustering] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const getTMDBImageUrl = (posterPath) => {\r\n    if (!posterPath) {\r\n      const placeholderSVG = `data:image/svg+xml,${encodeURIComponent(`\r\n        <svg width=\"80\" height=\"120\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <rect width=\"100%\" height=\"100%\" fill=\"#2a5298\"/>\r\n          <text x=\"50%\" y=\"50%\" text-anchor=\"middle\" fill=\"white\" font-size=\"12\" font-family=\"Arial\">\r\n            No Image\r\n          </text>\r\n        </svg>\r\n      `)}`;\r\n      return placeholderSVG;\r\n    }\r\n    return posterPath.startsWith('http') ? posterPath : `https://image.tmdb.org/t/p/w200${posterPath}`;\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchModelStatus();\r\n  }, []);\r\n\r\n  const fetchModelStatus = async () => {\r\n    try {\r\n      const response = await api.get('/recommendations/status');\r\n      setModelStatus(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching model status:', error);\r\n      setError('Errore nel recupero dello stato del modello');\r\n    }\r\n  };\r\n\r\n  const trainModel = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      await api.get('/recommendations/train-sync');\r\n      setError('');\r\n      fetchModelStatus();\r\n      alert('Modello addestrato con successo!');\r\n    } catch (error) {\r\n      console.error('Error training model:', error);\r\n      setError('Errore nel training del modello: ' + (error.response?.data?.detail || error.message));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchRecommendations = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const response = await api.get(`/recommendations/user/${user.id}?top_n=10`);\r\n      setRecommendations(response.data);\r\n      setError('');\r\n    } catch (error) {\r\n      console.error('Error fetching recommendations:', error);\r\n      setError('Errore nel recupero delle raccomandazioni: ' + (error.response?.data?.detail || error.message));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchUserHistory = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const response = await api.get(`/recommendations/user/${user.id}/history`);\r\n      setUserHistory(response.data);\r\n      setError('');\r\n    } catch (error) {\r\n      console.error('Error fetching user history:', error);\r\n      setError('Errore nel recupero dello storico: ' + (error.response?.data?.detail || error.message));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchEvaluation = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const response = await api.get('/recommendations/evaluation');\r\n      setEvaluation(response.data);\r\n      setError('');\r\n    } catch (error) {\r\n      console.error('Error fetching evaluation:', error);\r\n      setError('Errore nel recupero della valutazione: ' + (error.response?.data?.detail || error.message));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchClustering = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const response = await api.get('/recommendations/clustering');\r\n      setClustering(response.data);\r\n      setError('');\r\n    } catch (error) {\r\n      console.error('Error fetching clustering:', error);\r\n      setError('Errore nel recupero del clustering: ' + (error.response?.data?.detail || error.message));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <PageContainer>\r\n      <Header>\r\n        <Title>\r\n          <FaBrain />\r\n          Sistema di Raccomandazioni ML\r\n        </Title>\r\n        <Subtitle>\r\n          Raccomandazioni personalizzate basate su Machine Learning con algoritmo SVD\r\n        </Subtitle>\r\n      </Header>\r\n\r\n      {error && <ErrorMessage>{error}</ErrorMessage>}\r\n\r\n      <SectionContainer>\r\n        {/* Sezione Stato Modello e Training */}\r\n        <Section>\r\n          <SectionHeader>\r\n            <FaCog />\r\n            <SectionTitle>Stato Modello</SectionTitle>\r\n          </SectionHeader>\r\n          \r\n          {modelStatus && (\r\n            <>\r\n              <MetricCard>\r\n                <MetricValue>\r\n                  <StatusBadge isReady={modelStatus.is_trained}>\r\n                    {modelStatus.is_trained ? 'ADDESTRATO' : 'NON ADDESTRATO'}\r\n                  </StatusBadge>\r\n                </MetricValue>\r\n                <MetricLabel>Stato del Modello</MetricLabel>\r\n              </MetricCard>\r\n\r\n              {modelStatus.is_trained && (\r\n                <>\r\n                  <MetricCard>\r\n                    <MetricValue>{(modelStatus.explained_variance * 100).toFixed(2)}%</MetricValue>\r\n                    <MetricLabel>Varianza Spiegata</MetricLabel>\r\n                  </MetricCard>\r\n                  \r\n                  <MetricCard>\r\n                    <MetricValue>{modelStatus.n_components}</MetricValue>\r\n                    <MetricLabel>Componenti SVD</MetricLabel>\r\n                  </MetricCard>\r\n                </>\r\n              )}\r\n\r\n              <Button onClick={trainModel} disabled={loading}>\r\n                <FaCog />\r\n                {loading ? 'Training in corso...' : 'Ri-addestra Modello'}\r\n              </Button>\r\n            </>\r\n          )}\r\n        </Section>\r\n\r\n        {/* Sezione Raccomandazioni */}\r\n        <Section>\r\n          <SectionHeader>\r\n            <FaStar />\r\n            <SectionTitle>Le Tue Raccomandazioni</SectionTitle>\r\n          </SectionHeader>\r\n          \r\n          <Button onClick={fetchRecommendations} disabled={loading || !modelStatus?.is_trained}>\r\n            <FaPlay />\r\n            Genera Raccomandazioni\r\n          </Button>\r\n\r\n          {recommendations.length > 0 && (\r\n            <div style={{ marginTop: '20px' }}>\r\n              {recommendations.slice(0, 5).map((movie, index) => (\r\n                <MovieCard key={index}>\r\n                  <MoviePoster \r\n                    src={getTMDBImageUrl(movie.poster_url)} \r\n                    alt={movie.title}\r\n                    onError={(e) => {\r\n                      e.target.src = getTMDBImageUrl(null);\r\n                    }}\r\n                  />\r\n                  <MovieInfo>\r\n                    <MovieTitle>{movie.title}</MovieTitle>\r\n                    <MovieRating>\r\n                      <FaStar />\r\n                      {movie.predicted_rating.toFixed(2)} (previsto)\r\n                      {movie.tmdb_rating && ` • TMDB: ${movie.tmdb_rating}`}\r\n                    </MovieRating>\r\n                    <MovieGenres>\r\n                      {movie.genres.join(', ')} • Cluster: {movie.cluster}\r\n                    </MovieGenres>\r\n                  </MovieInfo>\r\n                </MovieCard>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </Section>\r\n\r\n        {/* Sezione Storico Utente */}\r\n        <Section>\r\n          <SectionHeader>\r\n            <FaChartLine />\r\n            <SectionTitle>Il Tuo Storico</SectionTitle>\r\n          </SectionHeader>\r\n          \r\n          <Button onClick={fetchUserHistory} disabled={loading}>\r\n            <FaChartLine />\r\n            Visualizza Storico Voti\r\n          </Button>\r\n\r\n          {userHistory.length > 0 && (\r\n            <div style={{ marginTop: '20px' }}>\r\n              <MetricCard>\r\n                <MetricValue>{userHistory.length}</MetricValue>\r\n                <MetricLabel>Film Votati</MetricLabel>\r\n              </MetricCard>\r\n\r\n              {userHistory.slice(0, 5).map((movie, index) => (\r\n                <MovieCard key={index}>\r\n                  <MoviePoster \r\n                    src={getTMDBImageUrl(movie.poster_url)} \r\n                    alt={movie.title}\r\n                    onError={(e) => {\r\n                      e.target.src = getTMDBImageUrl(null);\r\n                    }}\r\n                  />\r\n                  <MovieInfo>\r\n                    <MovieTitle>{movie.title}</MovieTitle>\r\n                    <MovieRating>\r\n                      <FaStar />\r\n                      {movie.rating}/5 (il tuo voto)\r\n                      {movie.tmdb_rating && ` • TMDB: ${movie.tmdb_rating}`}\r\n                    </MovieRating>\r\n                    <MovieGenres>{movie.genres.join(', ')}</MovieGenres>\r\n                  </MovieInfo>\r\n                </MovieCard>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </Section>\r\n\r\n        {/* Sezione Valutazione Modello */}\r\n        <Section>\r\n          <SectionHeader>\r\n            <FaChartLine />\r\n            <SectionTitle>Metriche del Modello</SectionTitle>\r\n          </SectionHeader>\r\n          \r\n          <Button onClick={fetchEvaluation} disabled={loading || !modelStatus?.is_trained}>\r\n            <FaChartLine />\r\n            Valuta Performance\r\n          </Button>\r\n\r\n          {evaluation && !evaluation.error && (\r\n            <div style={{ marginTop: '20px' }}>\r\n              <MetricCard>\r\n                <MetricValue>{evaluation.rmse?.toFixed(4) || 'N/A'}</MetricValue>\r\n                <MetricLabel>RMSE (Root Mean Square Error)</MetricLabel>\r\n              </MetricCard>\r\n\r\n              <MetricCard>\r\n                <MetricValue>{evaluation.mae?.toFixed(4) || 'N/A'}</MetricValue>\r\n                <MetricLabel>MAE (Mean Absolute Error)</MetricLabel>\r\n              </MetricCard>\r\n\r\n              <MetricCard>\r\n                <MetricValue>{evaluation.test_samples || 'N/A'}</MetricValue>\r\n                <MetricLabel>Campioni di Test</MetricLabel>\r\n              </MetricCard>\r\n            </div>\r\n          )}\r\n\r\n          {evaluation?.error && (\r\n            <ErrorMessage style={{ marginTop: '20px' }}>\r\n              {evaluation.error}\r\n            </ErrorMessage>\r\n          )}\r\n        </Section>\r\n\r\n        {/* Sezione Clustering */}\r\n        <Section>\r\n          <SectionHeader>\r\n            <FaBrain />\r\n            <SectionTitle>Clustering dei Film</SectionTitle>\r\n          </SectionHeader>\r\n          \r\n          <Button onClick={fetchClustering} disabled={loading || !modelStatus?.is_trained}>\r\n            <FaBrain />\r\n            Visualizza Clustering\r\n          </Button>\r\n\r\n          {clustering && !clustering.error && (\r\n            <div style={{ marginTop: '20px' }}>\r\n              <MetricCard>\r\n                <MetricValue>{clustering.n_clusters}</MetricValue>\r\n                <MetricLabel>Cluster Identificati</MetricLabel>\r\n              </MetricCard>\r\n\r\n              <MetricCard>\r\n                <MetricValue>{clustering.points?.length || 0}</MetricValue>\r\n                <MetricLabel>Film nel Dataset</MetricLabel>\r\n              </MetricCard>\r\n\r\n              <ClusterChart>\r\n                <div>\r\n                  <p>📊 Visualizzazione Clustering</p>\r\n                  <p>Cluster 0: {clustering.points?.filter(p => p.cluster === 0).length || 0} film</p>\r\n                  <p>Cluster 1: {clustering.points?.filter(p => p.cluster === 1).length || 0} film</p>\r\n                  <p>Cluster 2: {clustering.points?.filter(p => p.cluster === 2).length || 0} film</p>\r\n                </div>\r\n              </ClusterChart>\r\n            </div>\r\n          )}\r\n\r\n          {clustering?.error && (\r\n            <ErrorMessage style={{ marginTop: '20px' }}>\r\n              {clustering.error}\r\n            </ErrorMessage>\r\n          )}\r\n        </Section>\r\n      </SectionContainer>\r\n\r\n      {loading && (\r\n        <LoadingSpinner>\r\n          <div>Caricamento in corso...</div>\r\n        </LoadingSpinner>\r\n      )}\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default RecommendationsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}